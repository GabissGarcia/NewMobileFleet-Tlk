{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"23.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    LoginPage\n  ]\n})\nexport class LoginPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { ResetPasswordPage } from './../index';\nimport { Component, OnInit, trigger, state, style, transition, animate, keyframes } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IonicPage, NavController, ToastController, LoadingController, AlertController } from 'ionic-angular';\n\nimport { User } from '../../providers';\nimport { MainPage, SelectPlacaPage } from '../';\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n  animations: [\n \n    //For the logo\n    trigger('flyInBottomSlow', [\n      state('in', style({\n        transform: 'translate3d(0,0,0)'\n      })),\n      transition('void => *', [\n        style({transform: 'translate3d(0,2000px,0'}),\n        animate('2000ms ease-in-out')\n      ])\n    ]),\n \n    //For the background detail\n    trigger('flyInBottomFast', [\n      state('in', style({\n        transform: 'translate3d(0,0,0)'\n      })),\n      transition('void => *', [\n        style({transform: 'translate3d(0,2000px,0)'}),\n        animate('1000ms ease-in-out')\n      ])\n    ]),\n \n    //For the login form\n    trigger('bounceInBottom', [\n      state('in', style({\n        transform: 'translate3d(0,0,0)'\n      })),\n      transition('void => *', [\n        animate('2000ms 200ms ease-in', keyframes([\n          style({transform: 'translate3d(0,2000px,0)', offset: 0}),\n          style({transform: 'translate3d(0,-20px,0)', offset: 0.9}),\n          style({transform: 'translate3d(0,0,0)', offset: 1})\n        ]))\n      ])\n    ]),\n \n    //For login button\n    trigger('fadeIn', [\n      state('in', style({\n        opacity: 1\n      })),\n      transition('void => *', [\n        style({opacity: 0}),\n        animate('1000ms 2000ms ease-in')\n      ])\n    ])\n  ]\n})\nexport class LoginPage implements OnInit {\n\n  logoState: any = \"in\";\n  cloudState: any = \"in\";\n  loginState: any = \"in\";\n  formState: any = \"in\";\n\n  // The account fields for the login form.\n  // If you're using the username field with or without email, make\n  // sure to add it to the type\n  account: { username: string, password: string, isOnline:boolean } = {\n    username: '',\n    password: '',\n    isOnline: false\n  };\n\n  // Our translated text strings\n  private loginErrorString: string;\n  private httpErrorString: string;\n  waitString: string;\n  constructor(\n    public navCtrl: NavController,\n    public user: User,\n    public toastCtrl: ToastController,\n    public loadingCtrl: LoadingController,\n    public translateService: TranslateService,\n    private alertCtrl: AlertController\n  ) {\n\n    this.translateService.get(['LOGIN_ERROR', 'HTTP_LOGIN_ERROR', 'WAIT']).subscribe((values) => {\n      this.loginErrorString = values['LOGIN_ERROR'];\n      this.httpErrorString = values['HTTP_LOGIN_ERROR'];\n      this.waitString = values['WAIT'];\n    });\n   \n  }\n\n  ngOnInit() {\n    if (localStorage.getItem('yourTokenKey') != null && localStorage.getItem('yourTokenKey').length > 0){\n      this.user.validarLogin().subscribe((resp: any) => {\n        if (resp != null && resp.isMobile && !resp.primeiroAcesso){\n          this.user._user = resp;\n          if (this.user._user != null && this.user._user != undefined){\n            if(this.user._user.isMobile) {\n              if(this.user._user.nivel == 6) {\n                this.navCtrl.setRoot(SelectPlacaPage);\n              }else {\n                this.navCtrl.setRoot(MainPage);\n              }\n            }\n          }\n        }else {\n          localStorage.removeItem('yourTokenKey');\n        }\n      },error => {\n        localStorage.removeItem('yourTokenKey');\n      });\n    }\n    \n  }\n\n  // Attempt to login in through our User service\n  doLogin() {\n    const data = {\n      username: this.account.username.trim(),\n      password: this.account.password,\n      isOnline: this.account.isOnline\n    }\n\n    let loading = this.loadingCtrl.create({\n      content: this.waitString\n    });\n    loading.present();\n\n    this.user.login(data).subscribe((resp: any) => {\n      if(resp.id_token){\n        if(!resp.usuario.isMobile){\n          let toast = this.toastCtrl.create({\n            message: this.loginErrorString,\n            duration: 3000,\n            position: 'top'\n          });\n          toast.present();\n\n        }else {\n          console.log(this.account.isOnline);\n          if(this.account.isOnline){\n            localStorage.setItem('yourTokenKey', resp.id_token);\n          }else {\n            sessionStorage.setItem('yourTokenKey', resp.id_token);\n          }\n          this.user._user = resp.usuario;\n          \n          if (resp.usuario.primeiroAcesso) {\n            this.navCtrl.push(ResetPasswordPage);\n          }else {\n            if(resp.usuario.nivel == 6) {\n              this.navCtrl.setRoot(SelectPlacaPage);\n            }else {\n              this.navCtrl.setRoot(MainPage);\n            }\n            //this.navCtrl.setRoot(SelectPlacaPage);\n          }\n          \n        }\n        // this.navCtrl.setRoot(SelectPlacaPage);\n        \n        \n      }\n    }, (err) => {\n      loading.dismiss();\n      if(err.status === 401) {\n        let toast = this.toastCtrl.create({\n          message: this.loginErrorString,\n          duration: 3000,\n          position: 'top'\n        });\n        toast.present();\n      }else {\n        let toast = this.toastCtrl.create({\n          message: this.httpErrorString,\n          duration: 3000,\n          position: 'top'\n        });\n        toast.present();\n      }\n      // Unable to log in\n      \n    },() => {\n      loading.dismiss();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}